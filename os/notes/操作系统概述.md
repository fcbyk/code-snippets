## OS基本概念
### OS的定义

1. 负责管理协调硬件，软件等计算机资源的工作
2. 为上层用户、应用程序提供简单易用的服务
3. 是一种系统软件
### OS功能和目标
**资源的管理者：**处理机管理、存储器管理、文件管理、设备管理
**向用户提供服务：**

- 命令接口：联机命令接口、脱机命令接口
- 程序接口：GUI用户图形界面

**对硬件机器的扩展：**扩充机器
### OS的特征
**并发**
**共享**：互斥共享方式（如对摄像头设备的共享使用）、同时共享方式（如对硬盘资源的共享使用）
**虚拟**：空分复用技术（如虚拟存储技术）、时分复用技术（虚拟处理器技术）
**异步**
## OS的发展与分类
**手工操作阶段**

- 缺：人机速度矛盾

**批处理阶段**

- 单道批处理系统（引入脱机输入输出技术）
   - 优：缓解人机速度矛盾
   - 缺：资源利用率依然很低
- 多道批处理系统（操作系统开始出现）
   - 优：多道程序并发执行，资源利用率高
   - 缺：不提供人机交互功能

**分时操作系统**

- 优：提供人机交互功能
- 缺：不能优先处理紧急任务

**实时操作系统**

- 硬实时系统
   - 必须在绝对严格的规定时间内完成处理
- 软实时系统
   - 能接受偶尔违反时间规定
- 优：能优先处理紧急任务

**网络操作系统**
**分布式操作系统**
**个人计算机操作系统**
## OS的运行机制和体系结构
### 运行机制
两种指令：特权指令、非特权指令
两个处理器状态：核心态、用户态
两种程序：内核程序、应用程序
### 操作系统内核

- 时钟管理
- 中断处理
- 原语
   - 是一种特殊的程序，其执行具有原子性
- 对系统资源进行管理的功能
   - 进程管理
   - 存储器管理
   - 设备管理
### 操作系统的体系结构

- 大内核
   - 优点：高性能
   - 缺点：内核代码庞大，结构混乱、难以维护
- 微内核
   - 优点：内核功能少、结构清晰、方便维护
   - 缺点：需要频繁地在核心态和用户态之间切换，性能低

### 中断和异常
> 中断机制的诞生：为了实现多道程序并发执行而引入的一种技术
中断的概念和作用：发生中断，就意味着需要操作系统介入开展管理工作，cpu会立即进入核心态。“中断”是cpu从用户态进入核心态的唯一途径

中断的分类

- 内中断（也称异常、例外、陷入）：自愿中断--指令中断、强迫中断、硬件故障、软件中断
- 外中断（中断）：外设请求、人工干预

补充：内中断的另一种分类方式：陷阱（陷入）、故障、终止
外中断的处理过程

- 每条指令执行结束后，cpu检查是否有外部中断信号
- 若有外部中断信号，则需要保护被中断进程的cpu环境
- 根据中断信号类型转入相应的中断处理程序
- 恢复进程的cpu环境并退出中断，返回原进程继续往下执行
## 系统调用
### 什么是系统调用，有何作用？

- 操作系统提供给应用程序使用的接口
- 应用程序通过系统调用来请求获得操作系统的服务
- 系统调用会使处理器从用户态进入核心态
- 分类：设备管理、文件管理、进程控制、进程通信、内存管理
### 系统调用和库函数的区别

- 系统调用是操作系统向上层提供接口
- 有的库函数是对操作系统调用的进一步封装
- 当今编写的应用程序大多是通过高级语言提供的库函数间接地进行系统调用
### 系统调用背后的过程

- 传递系统调用参数
- 执行陷入指令
- 执行系统调用相应服务程序
- 返回用户程序
